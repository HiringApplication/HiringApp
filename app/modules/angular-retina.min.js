!function(angular,undefined){"use strict";function isDataUri(uri){return new RegExp(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i).test(uri)}var infix="@2x",dataUrlRegex=/^data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/,allowedImageTypesRegex=/(png|jp[e]?g)$/,fadeInWhenLoaded=!1,loadErrorHandler=angular.noop,ngRetina=angular.module("ngRetina",[]).config(["$provide",function($provide){$provide.decorator("ngSrcDirective",["$delegate",function($delegate){return $delegate[0].compile=function(element,attrs){},$delegate}])}]);ngRetina.provider("ngRetina",function(){this.setInfix=function(value){infix=value},this.setFadeInWhenLoaded=function(value){fadeInWhenLoaded=value},this.setLoadErrorHandler=function(handler){loadErrorHandler=handler},this.$get=angular.noop}),ngRetina.directive("ngSrc",["$window","$http","$log",function($window,$http,$log){function getHighResolutionURL(url){var parts=url.split(".");return parts.length<2?url:(parts[parts.length-2]+=infix,parts.join("."))}var msie=parseInt((/msie (\d+)/.exec($window.navigator.userAgent.toLowerCase())||[])[1],10),isRetina=function(){var mediaQuery="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return $window.devicePixelRatio>1||$window.matchMedia&&$window.matchMedia(mediaQuery).matches}();return function(scope,element,attrs){function setImgSrc(imageUrl){element.on("error",loadErrorHandler),attrs.$set("src",imageUrl),msie&&element.prop("src",imageUrl)}function getSessionStorageItem(imageUrl){var item;try{item=$window.sessionStorage.getItem(imageUrl)}catch(e){$log.warn("sessionStorage not supported"),item=imageUrl}return item}function setSessionStorageItem(imageUrl,imageUrl2x){try{$window.sessionStorage.setItem(imageUrl,imageUrl2x)}catch(e){$log.warn("sessionStorage not supported")}}function set2xVariant(imageUrl){var imageUrl2x;imageUrl2x=angular.isUndefined(attrs.at2x)?getSessionStorageItem(imageUrl):attrs.at2x,imageUrl2x?setImgSrc(imageUrl2x):(imageUrl2x=getHighResolutionURL(imageUrl),$http.head(imageUrl2x).then(function(data,status){setImgSrc(imageUrl2x),setSessionStorageItem(imageUrl,imageUrl2x)})["catch"](function(data,status,headers,config){setImgSrc(imageUrl),setSessionStorageItem(imageUrl,imageUrl)}))}attrs.$observe("ngSrc",function(imageUrl,oldValue){if(imageUrl){if(isDataUri(imageUrl))return setImgSrc(imageUrl);fadeInWhenLoaded&&!getSessionStorageItem("fadedIn-"+imageUrl)&&(element.css({opacity:0,"-o-transition":"opacity 0.5s ease-out","-moz-transition":"opacity 0.5s ease-out","-webkit-transition":"opacity 0.5s ease-out",transition:"opacity 0.5s ease-out"}),element.on("load",function(){setSessionStorageItem("fadedIn-"+imageUrl,!0),element.css("opacity",1)})),isRetina&&angular.isUndefined(attrs.noretina)&&"IMG"===element[0].tagName&&imageUrl.match(allowedImageTypesRegex)&&!imageUrl.match(dataUrlRegex)?set2xVariant(imageUrl):setImgSrc(imageUrl)}})}}])}(window.angular);